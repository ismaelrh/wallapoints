<div class="container">
    <nav class="navbar navbar-fixed-top navbar-default" role="navigation">
        <div class="navbar-inner container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#" style="color:white;">Wallalinks!</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>


                </ul>


                <ul class="nav navbar-nav navbar-right" ng-if="ctrl.user!=undefined"> <!-- Solo logout si logueado -->
                    <li><a href="" ng-click="ctrl.logoutGuest()">Salir ({{ctrl.user.username}}) </a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right" > <!-- Solo logout si logueado -->
                    <li><a href="" ng-click="ctrl.showRouteCreating()">Add Route</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right" > <!-- Solo logout si logueado -->
                    <li><a href="" ng-click="ctrl.showPoiCreating()">Add POI</a></li>
                </ul>



            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
</div>
<div class="navbar-offset"></div>


<ui-gmap-google-map id="map" center='ctrl.map.center' zoom='ctrl.map.zoom' options='ctrl.myOptions' events="ctrl.mapEvents"
                    control="ctrl.mapControl">
    <!-- Resultados de la búsqueda -->
    <ui-gmap-marker ng-repeat="poi in ctrl.getShownPois()"
                    idKey='{key:poi._id}'
                    events="ctrl.markersEvents"
                    control="poi"
                    options='{"title": "Raul"}'
                    coords='{latitude:poi.lat,longitude:poi.long}'>

        <ui-gmap-window show="show">
            <div>
                <p><b>{{poi.name}}</b></p>
            </div>
        </ui-gmap-window>

    </ui-gmap-marker>

</ui-gmap-google-map>


<!-- Menú lateral derecho plegado, mostrado cuando showRightPanel == false -->

<div class="overlaid-container">

    <div class="row overlaid-row">  <!-- Fila de los seleccionadores de paneles -->

        <div class="panel-selection btn-group btn-group-justified" role="group" aria-label="...">
            <div class="btn-group" role="group">
                <div class="btn btn-default" ng-click="ctrl.toggleLeftPanel()">
                    <span class="glyphicon"
                          ng-class="{'glyphicon-check':ctrl.showLeftPanel,'glyphicon-unchecked':!ctrl.showLeftPanel}"></span>
                    &nbsp;Resultados
                </div>

            </div>
            <div class="btn btn-default" ng-click="ctrl.toggleRightPanel()">
                <span class="glyphicon"
                      ng-class="{'glyphicon-check':ctrl.showRightPanel,'glyphicon-unchecked':!ctrl.showRightPanel}"></span>
                &nbsp;Info
            </div>

        </div>


    </div>


    <div class="row overlaid-row" style="margin:0px !important;"> <!-- Fila de los menús laterales desplegados -->

        <!-- Menú lateral izquierdo-->
        <div class="col-sm-4 col-md-3 sidebar">

            <!-- Menú lateral izquierdo primero, mostrado cuando showLeftPanel == true -->
            <div class="panel-group sidebar-body " id="accordion-left">
                <div class="panel panel-primary" ng-show="ctrl.showLeftPanel">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="" data-target="#searchResults">
                                <span class="fa fa-list-alt"></span>
                                Resultados de búsqueda
                            </a>
                  <span class="pull-right slide-submenu">
                    <span class="glyphicon glyphicon-chevron-left" ng-click="ctrl.toggleLeftPanel()"></span>
                  </span>
                        </h4>
                    </div>

                    <div id="searchResults" class="panel-collapse in">

                        <div class="panel-body">

                            <div class="btn-group btn-group-justified" role="group"> <!-- Pestañas POI/RUTAS -->
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default"
                                            ng-click="ctrl.poiListEnabled = true;"
                                            ng-class="{'active':ctrl.poiListEnabled}">Pois
                                    </button>
                                </div>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default"
                                            ng-click="ctrl.poiListEnabled = false;"
                                            ng-class="{'active':!ctrl.poiListEnabled}">Rutas
                                    </button>
                                </div>
                            </div>

                            <ul class="list-group" style="max-height: 90vh; overflow-y: scroll;"
                                ng-show="ctrl.poiListEnabled">
                                <li href="" class="list-group-item" ng-repeat="poi in ctrl.pois"
                                    ng-click="ctrl.showPoiDetail(poi._id); ctrl.centerMapInPoi(poi);"><a href="">{{poi.name}}</a>
                                </li>
                            </ul>
                            <ul class="list-group" style="max-height: 90vh; overflow-y: scroll;"
                                ng-show="!ctrl.poiListEnabled">
                                <li href="" class="list-group-item" ng-repeat="route in ctrl.routes"
                                    ng-click="ctrl.showAndCalculateRoute(route._id); ctrl.showUserDetail(route.creator)">
                                    <a href=""> {{route.name}}</a>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>

            </div>


        </div>


        <!-- Menú lateral derecho, tiene offset para dejar en medio vacío-->
        <div class="col-sm-4 col-sm-offset-4 col-md-3 col-md-offset-6 sidebar ">
            <!-- Menú lateral derecho desplegado, mostrado cuando showRightPanel == true -->
            <div class="panel-group sidebar-body" id="accordion-right" ng-show="ctrl.showRightPanel">
                <div class="panel panel-primary" ng-if="ctrl.showingRoute || ctrl.showingPoi">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="" data-target="#poiInfo">
                                <i class="fa fa-tasks"></i>
                                Información del POI
                            </a>

                      <span class="pull-right slide-submenu" ng-click="ctrl.toggleRightPanel()">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                      </span>
                        </h4>
                    </div>

                    <div id="poiInfo" class="panel-collapse collapse in">

                        <div class="panel-body" ng-if="ctrl.showingPoi">

                            <b>Id: </b> {{ctrl.detailedPoi._id}}
                            <br/>
                            <b>Nombre: </b> {{ctrl.detailedPoi.name}}
                            <br/>
                            <b>Descripción: </b> {{ctrl.detailedPoi.decription}}
                            <br/>
                            <b>Creador: </b> {{ctrl.detailedPoi.creator}}
                            <br/>
                            <b>Dirección: </b> por rellenar

                            <br/>


                            <button type="button" class="btn btn-default btn-block"
                                    ng-click="ctrl.toggleFav(ctrl.detailedPoi._id)" ng-if="ctrl.guest"><span
                                    class="glyphicon"
                                    ng-class='{"glyphicon-star":ctrl.detailedPoi.isFav,
                                            "glyphicon-star-empty":!ctrl.detailedPoi.isFav}'></span>Fav
                            </button>


                            <div star-rating ng-model="ctrl.detailedPoi.guestRating" max="5"
                                 on-rating-select="ctrl.changeGuestRating(rating)" ng-if="ctrl.guest"></div>
                            Average rating: {{ctrl.detailedPoi.avgRating}}

                            <div class="btn-group btn-group-justified" role="group" aria-label="...">
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default" ng-click="ctrl.showPoiEditing();"><span class="glyphicon glyphicon-pencil"></span></button>
                                </div>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-default" ng-click="ctrl.removeCurrentPoi()"><span class="glyphicon glyphicon-trash"></span></button>
                                </div>

                            </div>
                        </div>

                        <div class="panel-body" ng-if="ctrl.showingRoute">
                            <b>Nombre: </b> {{ctrl.detailedRoute.name}}
                            <br/>
                            <b>Creador: </b> {{ctrl.detailedRoute.creator}}
                            <br/>
                            <b>Puntos que la componen: </b>
                            <ol>
                                <li ng-repeat="poi in ctrl.detailedRoute.pois">{{poi.name}}</li>
                            </ol>
                        </div>
                    </div>
                </div>
                <div class="panel panel-primary" ng-if="ctrl.showingPoiEditing || ctrl.showingPoiCreating">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="" data-target="#poiEditing">
                                <i class="fa fa-tasks"></i>
                                <span ng-if="ctrl.showingPoiEditing"> Editing POI </span>
                                <span ng-if="ctrl.showingPoiCreating"> Creating POI </span>
                            </a>
                        </h4>
                    </div>
                    <div id="poiEditing" class="panel-collapse collapse in"
                         style="max-height: 50vh; overflow-y: scroll;">
                        <div class="panel-body">
                            <form class="form-horizontal">
                                <fieldset>


                                    <!-- Prepended text-->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Name</span>
                                                <input id="prependedtext" name="prependedtext" ng-model="ctrl.editingPoi.name" class="form-control" placeholder="e.g: My house" type="text" required="">
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Keywords</span>
                                                <input id="keywords" name="prependedtext" ng-model="ctrl.editingPoi.keywordList" class="form-control" placeholder="e.g: Spain, Zaragoza, ..." type="text" >
                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Multimedia URL</span>
                                                <input id="multimediaUrl" name="prependedtext" ng-model="ctrl.editingPoi.multimediaUrl" class="form-control" placeholder="e.g: http://www.google.es" type="text">
                                            </div>

                                        </div>
                                    </div>

                                    <!-- Textarea -->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <textarea class="form-control" ng-model="ctrl.editingPoi.description" id="" name=""></textarea>
                                        </div>
                                    </div>

                                    <!-- Prepended text-->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Long</span>
                                                <input  name="" class="form-control" ng-model="ctrl.editingPoi.long" placeholder="e.g: 12.54" type="text"  required="">
                                            </div>

                                        </div>
                                    </div>



                                    <!-- Prepended text-->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Lat</span>
                                                <input  name="" class="form-control" placeholder="e.g: 12.32" ng-model="ctrl.editingPoi.lat" type="text" required="">
                                            </div>

                                        </div>
                                    </div>

                                    <i>(Or make click wherevere you want the POI)</i>

                                    <!-- Button (Double) -->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <button ng-if="ctrl.showingPoiEditing"  name="button1id" class="btn btn-success" ng-click="ctrl.hidePoiEditing(true)">Update</button>
                                            <button ng-if="ctrl.showingPoiCreating"  name="button1id" class="btn btn-success" ng-click="ctrl.hidePoiCreating(true)">Add</button>
                                            <button ng-if="ctrl.showingPoiEditing"  name="button2id" class="btn btn-danger" ng-click="ctrl.hidePoiEditing(false)">Discard</button>
                                            <button ng-if="ctrl.showingPoiCreating" name="button2id" class="btn btn-danger" ng-click="ctrl.hidePoiCreating(false)">Discard</button>
                                        </div>
                                    </div>

                                </fieldset>
                            </form>

                        </div>

                    </div>
                </div>
                <div class="panel panel-primary" ng-if="ctrl.showingRouteCreating">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="" data-target="#poiEditing">
                                <i class="fa fa-tasks"></i>
                                Creating route
                            </a>
                        </h4>
                    </div>
                    <div id="" class="panel-collapse collapse in"
                         style="max-height: 50vh; overflow-y: scroll;">
                        <div class="panel-body">
                            <form class="form-horizontal">
                                <fieldset>


                                    <!-- Prepended text-->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <div class="input-group">
                                                <span class="input-group-addon">Name</span>
                                                <input id="" name="prependedtext" ng-model="ctrl.editingRoute.name" class="form-control" placeholder="e.g: My house" type="text" required="">
                                            </div>

                                        </div>
                                    </div>








                                    <!-- Button (Double) -->
                                    <div class="form-group">

                                        <div class="col-md-12">
                                            <button ng-if="ctrl.showingPoiEditing"  name="button1id" class="btn btn-success" ng-click="ctrl.hidePoiEditing(true)">Update</button>
                                            <button ng-if="ctrl.showingPoiCreating"  name="button1id" class="btn btn-success" ng-click="ctrl.hidePoiCreating(true)">Add</button>
                                            <button ng-if="ctrl.showingPoiEditing"  name="button2id" class="btn btn-danger" ng-click="ctrl.hidePoiEditing(false)">Discard</button>
                                            <button ng-if="ctrl.showingPoiCreating" name="button2id" class="btn btn-danger" ng-click="ctrl.hidePoiCreating(false)">Discard</button>
                                        </div>
                                    </div>

                                </fieldset>
                            </form>

                        </div>

                    </div>
                </div>
            </div>
                <div class="panel panel-primary" ng-if="ctrl.showingRoute">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="" data-target="#routeData">
                                <i class="fa fa-tasks"></i>
                                Ruta a seguir
                            </a>
                        </h4>
                    </div>
                    <div id="routeData" class="panel-collapse collapse in"
                         style="max-height: 50vh; overflow-y: scroll;">
                        <div class="panel-body" id="directionsList">
                            <span ng-if="ctrl.routeError" style="color:red;"><b>{{ctrl.routeError}}</b></span>
                        </div>

                    </div>
                </div>
            </div>


        </div>
    </div>


</div>
